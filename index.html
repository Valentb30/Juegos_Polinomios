<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Juego de Polinomios</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to right, #eef2f3, #8e9eab);
      margin: 0;
      padding: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      flex-direction: column;
    }

    .container {
      background-color: #fff;
      padding: 30px 40px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      width: 100%;
      margin-bottom: 20px;
    }

    h2 {
      text-align: center;
      color: #333;
      margin-bottom: 15px;
    }

    #timer,
    #jugador-nombre {
      text-align: center;
      font-size: 1.2rem;
      color: #555;
      margin-bottom: 10px;
    }

    #pregunta {
      font-weight: bold;
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: #444;
    }

    .opcion {
      background-color: #f8f9fa;
      border: 2px solid #dee2e6;
      border-radius: 10px;
      padding: 12px;
      margin-bottom: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
    }

    .opcion:hover {
      background-color: #e2e6ea;
    }

    .correcta {
      background-color: #d4edda !important;
      border-color: #28a745;
      color: #155724;
    }

    .incorrecta {
      background-color: #f8d7da !important;
      border-color: #dc3545;
      color: #721c24;
    }

    button {
      display: block;
      width: 100%;
      padding: 12px;
      margin-top: 20px;
      font-size: 1rem;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background-color: #0056b3;
    }

    #finalizar {
      display: none;
      background-color: #28a745;
    }

    #login-container input {
      width: 100%;
      padding: 10px;
      margin: 15px 0;
      font-size: 1rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th,
    td {
      border: 1px solid #ccc;
      padding: 10px;
    }

    th {
      background-color: #f0f0f0;
    }
  </style>
</head>

<body>

  <div class="container" id="login-container">
    <h2>Bienvenido al Juego de Polinomios</h2>
    <input type="text" id="username" placeholder="Ingresa tu nombre" />
    <button onclick="iniciarJuego()">Iniciar Juego</button>
  </div>

  <div class="container" id="juego-container" style="display:none;">
    <h2>Juego de Polinomios</h2>
    <div id="jugador-nombre"></div>
    <div id="timer">Tiempo: 2:00</div>
    <div id="pregunta"></div>
    <div id="opciones"></div>
    <button id="siguiente" onclick="siguientePregunta()" style="display:none;">Siguiente Pregunta</button>
    <button id="finalizar" onclick="finalizarJuego()">Finalizar Juego</button>
  </div>

  <div class="container" id="resultados-container" style="display:none;">
    <h2>Resultados del Juego</h2>
    <table id="tabla-resultados">
      <thead>
        <tr>
          <th>Jugador</th>
          <th>Correctas</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <button onclick="reiniciarJuego()">Jugar de nuevo</button>
  </div>

  <script>
    const preguntas = [
      {
        tipo: "Resta", expresion: "3x² + 4x - 2 - x² + x - 5", correcta: "2x² + 3x + 3",
        distractores: ["3x² + 4x + 2", "2x² + 2x + 4", "3x² + 2x + 4"]
      },
      {
        tipo: "Suma", expresion: "x² - 2x + 3 + 2x² + 5x - 1", correcta: "3x² + 3x + 2",
        distractores: ["x² + 5x + 2", "2x² - 3x + 4", "3x² + 4x - 3"]
      },
      {
        tipo: "Multiplicación", expresion: "(x + 2)(x - 3)", correcta: "x² - x - 6",
        distractores: ["x² + 5x + 6", "x² - 2x - 6", "x² + x - 6"]
      },
      {
        tipo: "Factoriza", expresion: "x² + 5x + 6", correcta: "(x + 2)(x + 3)",
        distractores: ["(x - 2)(x + 3)", "(x + 1)(x + 6)", "(x + 3)(x + 4)"]
      },
      {
        tipo: "Resta", expresion: "5x² - 3x + 1 - 2x² + x - 4", correcta: "3x² - 4x - 3",
        distractores: ["7x² - 2x - 3", "3x² - 2x - 3", "3x² - 4x + 3"]
      },
      {
        tipo: "Suma", expresion: "4x² + x + 2 + x² - 3x + 1", correcta: "5x² - 2x + 3",
        distractores: ["3x² - 2x + 3", "5x² + 2x + 3", "5x² - x + 3"]
      },
      {
        tipo: "Multiplicación", expresion: "(x - 1)(x + 4)", correcta: "x² + 3x - 4",
        distractores: ["x² - 3x - 4", "x² + 5x + 4", "x² + 3x + 4"]
      },
      {
        tipo: "Factoriza", expresion: "x² - 7x + 12", correcta: "(x - 3)(x - 4)",
        distractores: ["(x - 2)(x - 6)", "(x - 1)(x - 12)", "(x - 4)(x - 5)"]
      },
      {
        tipo: "Resta", expresion: "6x² + 2x - 3 - 4x² + x + 1", correcta: "2x² + x - 4",
        distractores: ["2x² + 3x - 2", "10x² + x - 2", "2x² - x - 4"]
      },
      {
        tipo: "Suma", expresion: "x² + 3x + 1 + 2x² - x + 4", correcta: "3x² + 2x + 5",
        distractores: ["3x² + 4x + 5", "x² + 2x + 5", "3x² - 2x + 5"]
      }
    ];

       let jugador = "";
    let preguntasSeleccionadas = [];
    let indicePregunta = 0;
    let puntaje = 0;
    let tiempoRestante = 120;
    let temporizadorId;

    function iniciarJuego() {
      jugador = document.getElementById("username").value.trim();
      if (!jugador) {
        alert("Por favor ingresa tu nombre.");
        return;
      }

      preguntasSeleccionadas = [];
      const indices = [];
      while (indices.length < 5) {
        let rand = Math.floor(Math.random() * preguntas.length);
        if (!indices.includes(rand)) indices.push(rand);
      }
      preguntasSeleccionadas = indices.map(i => preguntas[i]);

      indicePregunta = 0;
      puntaje = 0;

      document.getElementById("login-container").style.display = "none";
      document.getElementById("resultados-container").style.display = "none";
      document.getElementById("juego-container").style.display = "block";
      document.getElementById("jugador-nombre").textContent = `Jugador: ${jugador}`;

      mostrarPregunta();
      iniciarTemporizador(120);
    }

    function mostrarPregunta() {
      const pregunta = preguntasSeleccionadas[indicePregunta];
      document.getElementById("pregunta").textContent = `${pregunta.tipo}: ${pregunta.expresion}`;
      const opcionesDiv = document.getElementById("opciones");
      opcionesDiv.innerHTML = "";

      const opciones = [pregunta.correcta, ...pregunta.distractores];
      for (let i = opciones.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [opciones[i], opciones[j]] = [opciones[j], opciones[i]];
      }

      opciones.forEach(opcionText => {
        const btn = document.createElement("div");
        btn.textContent = opcionText;
        btn.className = "opcion";
        btn.onclick = () => seleccionarOpcion(btn, opcionText === pregunta.correcta);
        opcionesDiv.appendChild(btn);
      });

      document.getElementById("siguiente").style.display = "none";
      document.getElementById("finalizar").style.display = "none";
    }

    function seleccionarOpcion(elemento, esCorrecta) {
      const opciones = document.querySelectorAll(".opcion");
      opciones.forEach(op => op.onclick = null);

      if (esCorrecta) {
        elemento.classList.add("correcta");
        puntaje++;
      } else {
        elemento.classList.add("incorrecta");
        opciones.forEach(op => {
          if (op.textContent === preguntasSeleccionadas[indicePregunta].correcta) {
            op.classList.add("correcta");
          }
        });
      }

      if (indicePregunta < preguntasSeleccionadas.length - 1) {
        document.getElementById("siguiente").style.display = "block";
      } else {
        document.getElementById("finalizar").style.display = "block";
      }
    }

    function siguientePregunta() {
      indicePregunta++;
      mostrarPregunta();
    }

    function finalizarJuego() {
      clearInterval(temporizadorId);
      document.getElementById("juego-container").style.display = "none";
      mostrarResultados();
    }

    function mostrarResultados() {
      document.getElementById("resultados-container").style.display = "block";
      const tbody = document.querySelector("#tabla-resultados tbody");
      tbody.innerHTML = "";
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${jugador}</td><td>${puntaje}</td><td>${preguntasSeleccionadas.length}</td>`;
      tbody.appendChild(tr);
    }

    function reiniciarJuego() {
      document.getElementById("resultados-container").style.display = "none";
      document.getElementById("login-container").style.display = "block";
      document.getElementById("username").value = "";
    }

    function iniciarTemporizador(segundos) {
      tiempoRestante = segundos;
      actualizarTimer();
      if (temporizadorId) clearInterval(temporizadorId);
      temporizadorId = setInterval(() => {
        tiempoRestante--;
        actualizarTimer();
        if (tiempoRestante <= 0) {
          clearInterval(temporizadorId);
          alert("¡Se terminó el tiempo!");
          finalizarJuego();
        }
      }, 1000);
    }

    function actualizarTimer() {
      const minutos = Math.floor(tiempoRestante / 60);
      const segundos = tiempoRestante % 60;
      document.getElementById("timer").textContent = `Tiempo: ${minutos}:${segundos.toString().padStart(2, '0')}`;
    }
  </script>

</body>

</html>
