<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <title>Juego de Polinomios</title>
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(to right, #eef2f3, #8e9eab);
        margin: 0;
        padding: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        flex-direction: column;
      }
      .container {
        text-align: center;
        margin-top: 20px;
      }
      input, button {
        padding: 10px;
        font-size: 16px;
        margin: 10px;
        width: 200px;
        border-radius: 5px;
      }
      button {
        cursor: pointer;
        background-color: #6c757d;
        color: white;
        border: none;
      }
      button:hover {
        background-color: #5a6268;
      }
      #timer {
        font-size: 20px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>

    <div class="container" id="login-container">
      <h2>Bienvenido al Juego de Polinomios</h2>
      <input type="text" id="username" placeholder="Ingresa tu nombre">
      <button onclick="iniciarJuego()">Iniciar Juego</button>
    </div>

    <div class="container" id="juego-container" style="display:none;">
      <h2>Juego de Polinomios</h2>
      <div id="jugador-nombre"></div>
      <div id="timer">Tiempo: 2:00</div>
      <div id="pregunta"></div>
      <div id="opciones"></div>
      <button id="siguiente" onclick="generarPregunta()" style="display:none;">Siguiente Pregunta</button>
      <button id="finalizar" onclick="finalizarJuego()">Finalizar Juego</button>
    </div>

    <script>
      let jugadorActual = '';
      let respuestasCorrectas = 0;
      let preguntasRespondidas = 0;
      const totalPreguntas = 5;
      const scriptURL = 'TU_URL_DEL_SCRIPT_AQUÍ';  // Aquí va la URL de tu aplicación web
      let intervalo; // Variable para el temporizador

      // Función para iniciar el juego
      function iniciarJuego() {
        const nombre = document.getElementById('username').value.trim();
        if (nombre === '') {
          alert('Por favor ingresa un nombre.');
          return;
        }
        jugadorActual = nombre;
        document.getElementById('jugador-nombre').textContent = `Jugador: ${jugadorActual}`;
        document.getElementById('login-container').style.display = 'none';
        document.getElementById('juego-container').style.display = 'block';
        generarPregunta();
        iniciarTemporizador();
      }

      // Función para iniciar el temporizador
      function iniciarTemporizador() {
        let tiempoRestante = 120; // 2 minutos
        intervalo = setInterval(function () {
          const minutos = Math.floor(tiempoRestante / 60);
          const segundos = tiempoRestante % 60;
          document.getElementById('timer').textContent = `Tiempo: ${minutos}:${segundos < 10 ? '0' : ''}${segundos}`;
          tiempoRestante--;
          if (tiempoRestante < 0) {
            clearInterval(intervalo);
            alert("Se acabó el tiempo!");
            finalizarJuego();
          }
        }, 1000);
      }

      // Función para generar una pregunta (Lógica de preguntas)
      function generarPregunta() {
        // Lógica para generar la pregunta y las opciones
        // Esto debe generar dinámicamente una pregunta con 4 opciones y una correcta
        const pregunta = "¿Qué es un polinomio?";
        const opciones = ["a) Una constante", "b) Una operación", "c) Un conjunto de números", "d) Una expresión algebraica"];
        const respuestaCorrecta = 3; // La opción 'd' es la correcta

        document.getElementById('pregunta').textContent = pregunta;
        document.getElementById('opciones').innerHTML = opciones.map((opcion, index) =>
          `<button onclick="verificarRespuesta(${index}, ${respuestaCorrecta})">${opcion}</button>`
        ).join('');
        document.getElementById('siguiente').style.display = 'inline';
      }

      // Función para verificar la respuesta seleccionada
      function verificarRespuesta(opcionSeleccionada, respuestaCorrecta) {
        if (opcionSeleccionada === respuestaCorrecta) {
          respuestasCorrectas++;
        }
        preguntasRespondidas++;
        if (preguntasRespondidas < totalPreguntas) {
          generarPregunta();
        } else {
          finalizarJuego();
        }
      }

      // Función para finalizar el juego y guardar los resultados
      function finalizarJuego() {
        clearInterval(intervalo);  // Detener el temporizador

        // Enviar los datos con fetch (POST)
        fetch(scriptURL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            jugador: jugadorActual,
            correctas: respuestasCorrectas,
            incorrectas: totalPreguntas - respuestasCorrectas,
            total: totalPreguntas
          })
        })
        .then(response => response.json())
        .then(data => {
          console.log("Resultado guardado exitosamente:", data);
        })
        .catch(error => {
          console.error("Error al guardar en la hoja de cálculo:", error);
          alert("Error al guardar los resultados. Intenta de nuevo más tarde.");
        });

        // Aquí podrías hacer el manejo de resultados en el HTML si es necesario
      }

    </script>
  </body>
</html>

